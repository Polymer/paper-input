<!--
    @license
    Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
    This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
    The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
    The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
    Code distributed by Google as part of the polymer project is also
    subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../polymer/polymer.html">

<!--
@element paper-input
-->

<dom-module id="paper-input-underline">

  <style>

    :host {
      display: block;
      position: relative;
      height: 0px;
      overflow: visible;
    }

    .unfocused-line {
      background-color: #757575;
      height: 1px;
    }

    .focused-line {
      background-color: #4059a9;
      height: 2px;
      -moz-transform-origin: inherit;
      -webkit-transform-origin: inherit;
      transform-origin: inherit;
      -webkit-transform: scale3d(0,1,1);
      transform: scale3d(0,1,1);
    }

    :host-context([invalid]) .focused-line {
      background-color: #d34336;
    }

    :host([focused]) .focused-line {
      -webkit-transform: none;
      transform: none;
    }

    :host([animating]) .focused-line {
      -webkit-transition: -webkit-transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

  </style>

  <template>

    <div class="unfocused-line" fit></div>
    <div class="focused-line" fit></div>

  </template>

</dom-module>

<script>

(function() {

  Polymer({

    is: 'paper-input-underline',

    properties: {

      focused: {
        observer: 'focusedChanged',
        reflectToAttribute: true,
        type: Boolean
      }

    },

    bind: {
      focused: 'focusedChanged'
    },

    ready: function() {
      this.animated = true;
    },

    focusedChanged: function() {
      if (this.focused) {
        // only animate from unfocused -> focused
        if (this.animated) {
          this.setAttribute('animating', '');
        }
      } else {
        this.removeAttribute('animating');
      }
    }

  });

})();

</script>
